{% extends 'dwebsummit/layout.html' %}
{% import 'dwebsummit/_macro_people_grid.html' as macro_people_grid %}
{% import 'dwebsummit/_macro_related_grid.html' as macro_related_grid %}

{% block body %}
<div class="text-page">

  <section class="full pt0">
    <h1>{{object.title}}</h1>

    {% if object.banner_image %}
      <img class="banner-image js-dither" src="{{object.banner_image.banner.url}}" />
    {% endif %}

    <div class="page-body-contents">
      {{object.body_text|safe}}
    </div>
  </section>


  {% if object.people.count() %}
  <div class="row">
    <section class="full">
      <div class="people-small">
        {{ macro_people_grid.people_grid(object.people.all()) }}
      </div>
    </section>
  </div>
  {% endif %}

  {% set prev_page = object.prev.first() %}
  {% if prev_page or object.next_page %}
  <div class="row">
    <section id="page-nav" class="full">
      <div>
      {% if prev_page %}
        ← <a href="{{prev_page.page_url_abs}}">{{prev_page.title}}</a>
      {% endif %}
      </div>
      <div>
      {% if object.next_page %}
        <a href="{{object.next_page.page_url_abs}}">{{object.next_page.title}}</a> →
      {% endif %}
      </div>
    </section>
  </div>
  {% endif %}

  {% if object.related_pages.count() %}
  <div class="row">
    <section id="related" class="">
      {{ macro_related_grid.related_grid(object.related_pages.all().order_by('-dwebsummit_admin_page_related_pages.id')) }}
    </section>
  </div>
  {% endif %}

</div>
{% endblock %}
